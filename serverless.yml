service: control-confeccion-api
frameworkVersion: '3'

provider:
  name: aws
  runtime: nodejs18.x
  region: us-east-1
  stage: prod
  environment:
    NODE_OPTIONS: --enable-source-maps
    TZ: America/Guatemala
  httpApi:
    cors:
      allowedOrigins:
        - '*'
      allowedHeaders:
        - Content-Type
        - Authorization
      allowedMethods:
        - GET
        - POST
        - PUT
        - DELETE
        - OPTIONS

functions:
  # =========================
  # Productos
  # =========================
  productos-list:
    handler: src/handlers/productos.listar
    events:
      - httpApi:
          path: /productos
          method: GET

  productos-create:
    handler: src/handlers/productos.crear
    events:
      - httpApi:
          path: /productos
          method: POST

  productos-update:
    handler: src/handlers/productos.actualizar
    events:
      - httpApi:
          path: /productos/{id}
          method: PUT

  productos-delete:
    handler: src/handlers/productos.eliminar
    events:
      - httpApi:
          path: /productos/{id}
          method: DELETE

  # =========================
  # Inventario
  # =========================
  inventario-list:
    handler: src/handlers/inventario.listar
    events:
      - httpApi:
          path: /inventario
          method: GET

  inventario-mov:
    handler: src/handlers/inventario.movimiento
    events:
      - httpApi:
          path: /mov
          method: POST

  # =========================
  # Ã“rdenes
  # =========================
  ordenes-list:
    handler: src/handlers/ordenes.listar
    events:
      - httpApi:
          path: /ordenes
          method: GET

  ordenes-create:
    handler: src/handlers/ordenes.crear
    events:
      - httpApi:
          path: /ordenes
          method: POST

  ordenes-update:
    handler: src/handlers/ordenes.actualizar
    events:
      - httpApi:
          path: /ordenes/{id}
          method: PUT

plugins:
  - serverless-offline
